<div class="survey-dashboard">
  <app-navbar></app-navbar>

  <!-- Content -->
  <div class="sub-navbar" *ngIf="tpl as t">
    <div class="sub-nav-card">

      <!-- Header block -->
      <div class="sub-nav-items">
        <div class="surveys-count">
          Survey answer
        </div>
        <div class="flex justify-between items-start gap-4">
          <div>
            <h2 class="text-gray-700 font-semibold">{{ t.name }}</h2>
          </div>
        </div>

        <div class="filter-dropdowns">
          <div class="dropdown-wrapper">
            <a (click)="cancel()" class="actions-btn">Back to list</a>
          </div>
        </div>
      </div>

      <!-- Form Preview -->
      <div class="p-6">
        <div class="p-6 flex flex-col gap-4 shadow-md rounded-lg border border-gray-200">
          @for (row of rows; track row.id) {
            <div class="flex gap-4 flex-wrap">
              @for (field of row.fields; track field.id) {
                <div class="flex-1">
                 <app-form-field-preview
  [field]="field"
  (valueChange)="onFieldChange(row.id, $event.fieldId, $event.value)"
/>
                </div>
              }
            </div>
          }
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex justify-end gap-4 mt-6">
        <button
          type="button"
          (click)="cancel()"
          class="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded"
        >
          Cancel
        </button>

        <button
          type="button"
          (click)="save()"
          class="px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-white rounded"
        >
          Save
        </button>

        <button
          type="button"
          (click)="submit()"
          class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded"
        >
          Submit
        </button>
      </div>

    </div>
  </div>
</div>
